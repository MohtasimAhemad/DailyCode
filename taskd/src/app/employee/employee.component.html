<div class="flex justify-content-between">
<h2>Employee List</h2>
<p-button label="Add Employee" (click)="showAddModal()"></p-button>
</div>

<!-- <p-table [value]="employee" [tableStyle]="{'min-width': '50rem'}">
    <ng-template pTemplate="header">
        <tr>
            <th>Id</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>E mail</th>
            <th>Mobile no.</th>
            <th>Salary</th>
        </tr>
    </ng-template> -->
    
    <p-table [value]="employee" dataKey="id" editMode="row" [tableStyle]="{'min-width': '50rem'}">
        <ng-template pTemplate="header">
            <tr>
                <th style="width:15%">Id</th>
                <th style="width:15%">First Name</th>
                <th style="width:15%">Last Name</th>
                <th style="width:15%">E mail</th>
                <th style="width:15%">Mobile no.</th>
                <th style="width:15%">Salary</th>
                <th style="width:15%">Action</th>

            </tr>
        </ng-template>
    <!-- <ng-template pTemplate="body" let-employee>
        <tr>
            <td>{{employee.id}}</td>
            <td>{{employee.firstName}}</td>
            <td>{{employee.lastName}}</td>
            <td>{{employee.eMail}}</td>
            <td>{{employee.mobileNo}}</td>
            <td>{{employee.salary}}</td>
            <td>
                <button pButton pRipple type="button"
                 icon="pi pi-trash" class="p-button-rounded p-button-warning" (click)="deleteEmployee(employee)"></button>
            </td>
        </tr>
    </ng-template> -->
    <ng-template pTemplate="body" let-employee let-editing="editing" let-ri="rowIndex">
        <tr [pEditableRow]="employee">
            <td>
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <input pInputText type="text" [(ngModel)]="employee.id">
                    </ng-template>
                    <ng-template pTemplate="output">
                        {{employee.id}}
                    </ng-template>
                </p-cellEditor>
            </td>
            <td>
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <input pInputText type="text" [(ngModel)]="employee.firstName" required>
                    </ng-template>
                    <ng-template pTemplate="output">
                        {{employee.firstName}}
                    </ng-template>
                </p-cellEditor>
            </td>
            <td>
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <input pInputText type="text" [(ngModel)]="employee.lastName">
                    </ng-template>
                    <ng-template pTemplate="output">
                        {{employee.lastName}}
                    </ng-template>
                </p-cellEditor>
            </td>
            <td>
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <input pInputText type="text" [(ngModel)]="employee.eMail">
                    </ng-template>
                    <ng-template pTemplate="output">
                        {{employee.eMail}}
                    </ng-template>
                </p-cellEditor>
            </td>
            <td>
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <input pInputText type="text" [(ngModel)]="employee.mobileNo">
                    </ng-template>
                    <ng-template pTemplate="output">
                        {{employee.mobileNo}}
                    </ng-template>
                </p-cellEditor>
            </td>
            <td>
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <input pInputText type="text" [(ngModel)]="employee.salary">
                    </ng-template>
                    <ng-template pTemplate="output">
                        {{employee.salary}}
                    </ng-template>
                </p-cellEditor>
            </td>
            <td>
                <div class="flex align-items-center justify-content-center gap-2">
                    <button *ngIf="!editing" pButton pRipple type="button" pInitEditableRow icon="pi pi-pencil" (click)="onRowEditInit(employee)" class="p-button-rounded p-button-text"></button>
                    <button *ngIf="editing" pButton pRipple type="button"  pSaveEditableRow icon="pi pi-check" (click)="onRowEditSave(employee)" class="p-button-rounded p-button-text p-button-success mr-2"></button>
                    <button *ngIf="editing" pButton pRipple type="button" pCancelEditableRow icon="pi pi-times" (click)="onRowEditCancel(employee)" class="p-button-rounded p-button-text p-button-danger"></button>
                    <button pButton pRipple type="button"
                 icon="pi pi-trash" class="p-button-rounded p-button-warning" (click)="deleteEmployee(employee)"></button>
                </div>
            </td>
            
        </tr>
    </ng-template>
</p-table>


<app-add-edit-employee 
[displayAddModal]="displayAddModal"
(clickClose)="hideAddModal($event);"
(clickAdd)="loadAPIAgain()"
></app-add-edit-employee>

<p-toast position="bottom-center"></p-toast>

<p-confirmDialog header="Delete"></p-confirmDialog>